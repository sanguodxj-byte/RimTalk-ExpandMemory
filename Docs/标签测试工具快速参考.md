# ?? 标签测试工具 - 快速参考

## ?? 快速开始

```
1. 打开常识库界面
2. 点击左侧 ?? 标签测试（浅绿色按钮）
3. 输入标签和对话
4. 点击 ?? 测试
5. 查看结果
```

## ?? 界面元素

**输入区域（上半部分）**：

| 元素 | 说明 | 示例 |
|------|------|------|
| **测试标签** | 要测试的标签（支持多个） | `战斗,射击,瞄准` |
| **对话内容** | 模拟的对话文本 | `我要练习射击技术` |
| **选择 Pawn** | 可选的 Pawn（包含技能信息） | `张三（射击15级）` |
| **?? 测试** | 执行测试 | 点击查看结果 |
| **清除** | 清空所有输入 | 重置测试 |

**结果区域（下半部分，分隔线下方）**：

| 元素 | 说明 |
|------|------|
| **匹配结果** | ? 匹配成功 / ? 不匹配 |
| **实际匹配文本** | 可滚动的完整匹配文本显示 |

## ? 结果解读

### 匹配成功 ?
```
? 匹配成功

实际匹配文本：
我要练习射击技术 张三 女性 人类 工作狂 射击 近战
```

**含义**: 标签中的任意一个关键词出现在匹配文本中

### 不匹配 ?
```
? 不匹配

实际匹配文本：
今天天气不错 张三 女性 人类 工作狂
```

**含义**: 标签中的所有关键词都不在匹配文本中

## ?? 常见场景

### 1?? 测试新标签是否有效

**输入**:
- 标签: `战斗,射击`
- 对话: `准备战斗`
- Pawn: 无

**预期**: ? 匹配（包含"战斗"）

### 2?? 诊断技能名误触

**输入**:
- 标签: `射击`
- 对话: `我要睡觉`
- Pawn: 张三（射击15级）

**结果**: ? 匹配（误触！因为 Pawn 技能包含"射击"）

**解决**: 改用 `规则-射击战斗,瞄准`

### 3?? 验证组合标签

**输入**:
- 标签: `规则-射击战斗,瞄准,精准`
- 对话: `今天做饭`
- Pawn: 张三（射击15级）

**结果**: ? 不匹配（符合预期，避免误触）

## ?? 实用技巧

### ? 推荐做法

1. **先测无 Pawn 场景**
   - 验证标签与对话直接相关

2. **再测有 Pawn 场景**
   - 检查技能名是否导致误触

3. **查看详细日志**
   - 按 <kbd>F12</kbd> 查看完整信息

### ? 避免误区

1. ? 只测理想场景
   - ? 也要测试可能误触的场景

2. ? 忽略匹配文本细节
   - ? 仔细查看实际包含了什么

3. ? 不看日志
   - ? 日志有更详细的诊断信息

## ?? 匹配文本组成

```
匹配文本 = 对话 + Pawn名字 + 性别 + 种族 + 特性 + 技能(≥10级)
```

**示例**:
```
对话: "我要射击"
Pawn: 张三（女性，人类，工作狂，射击15级，近战12级）

实际匹配文本:
我要射击 张三 女性 人类 工作狂 射击 近战
          ↑                      ↑    ↑    ↑
       Pawn名字               特性  技能  技能
```

## ?? 故障排除

### 问题: 测试显示匹配，但游戏中不触发

**可能原因**:
- 常识被禁用
- 重要性太低
- 达到最大注入数量

**解决**:
1. 检查常识是否启用
2. 提高重要性（≥0.5）
3. 增加最大注入数量设置

### 问题: 无法选择 Pawn

**原因**: 未进入游戏或地图无 Pawn

**解决**: 加载存档并进入游戏

### 问题: 结果与预期不符

**建议**:
1. 查看实际匹配文本
2. 检查标签分隔符（逗号）
3. 查看游戏日志详细信息

## ?? 相关文档

- [标签测试工具详细说明](./标签测试工具使用说明.md)
- [常识库使用指南](./常识库使用说明按钮.md)
- [技能名陷阱说明](./常识库标签最佳实践-技能名陷阱.md)

## ? 快捷键

| 操作 | 快捷键 |
|------|--------|
| 打开测试工具 | 点击 ?? 标签测试按钮 |
| 查看日志 | <kbd>F12</kbd> |
| 关闭窗口 | <kbd>ESC</kbd> 或 ? |

---

**版本**: v3.3.21+  
**更新**: 2025-12-20
