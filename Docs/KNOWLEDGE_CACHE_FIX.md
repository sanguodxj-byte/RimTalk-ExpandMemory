# 常识库标签缓存修复 (v3.3.28)

## 问题描述
用户报告了一个常识匹配异常的问题：一个标签为 `[在地上吃饭我不要触发]` 的常识条目被错误地匹配到了不相关的上下文中（如袭击事件）。

## 原因分析
经过排查，发现 `CommonKnowledgeEntry` 类使用了一个内部缓存 `cachedTags` 来存储分割后的标签列表，以提高匹配性能。然而，在 `Dialog_CommonKnowledge` 中编辑常识条目的标签时，并没有清除这个缓存。

这导致了以下情况：
1. 用户创建或导入了一个常识条目，其标签包含上下文中出现的词（例如“袭击”）。
2. 系统首次匹配时，将该标签缓存到 `cachedTags` 中。
3. 用户后来将标签修改为其他内容（例如“在地上吃饭我不要触发”）。
4. 由于缓存未清除，系统仍然使用旧的标签列表（包含“袭击”）进行匹配。
5. 结果导致匹配成功，但 UI 显示的是新标签，造成“幽灵匹配”的假象。

## 修复方案
1. **CommonKnowledgeLibrary.cs**: 在 `CommonKnowledgeEntry` 类中添加了 `InvalidateCache()` 方法，用于手动清除标签缓存。
2. **Dialog_CommonKnowledge.cs**: 在 `SaveEntry` 方法中，当用户保存对现有条目的修改时，调用 `InvalidateCache()`，强制系统在下次匹配时重新解析标签。

## 验证
修复后，修改常识条目的标签将立即生效，不再会出现匹配旧标签的情况。
