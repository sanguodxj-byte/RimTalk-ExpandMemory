# ?? Mind Stream UI 快速开始指南

## 欢迎使用全新的 Mind Stream 时间线！

v3.3.19 带来了全新的用户界面，让记忆管理更加直观和强大。

---

## ?? 基础操作

### 打开记忆管理器
1. 游戏底部菜单找到 **"Memory"** 按钮
2. 点击打开记忆时间线窗口
3. 选择一个殖民者查看TA的记忆

### 界面布局
```
┌─────────────────────────────────────────────────────────┐
│  [殖民者选择器]              [Preview] [Knowledge]      │
├──────────────┬──────────────────────────────────────────┤
│              │                                          │
│  过滤器面板   │          记忆时间线                      │
│              │                                          │
│  - 层级过滤  │  ┌──────────────────────────────┐       │
│  - 类型过滤  │  │  [ABM] 对话 ? 5分钟前         │       │
│  - 统计信息  │  │  内容预览...                  │       │
│              │  └──────────────────────────────┘       │
│  批量操作    │                                          │
│              │  ┌──────────────────────────────┐       │
│  - 总结      │  │  [SCM] 行动 ? 2小时前         │       │
│  - 归档      │  │  内容预览...                  │       │
│  - 删除      │  └──────────────────────────────┘       │
│              │                                          │
└──────────────┴──────────────────────────────────────────┘
```

---

## ??? 选择记忆

### 单选
- **点击**记忆卡片 → 选中单个记忆
- 被选中的卡片会高亮显示

### 多选
有三种方式：

1. **Ctrl + 点击**
   - 按住 `Ctrl` 键
   - 点击记忆卡片
   - 再次点击可取消选择

2. **Shift + 点击（范围选择）**
   - 先点击第一个记忆
   - 按住 `Shift` 键
   - 点击最后一个记忆
   - 之间的所有记忆都会被选中

3. **拖拽框选**
   - 在空白处按住鼠标左键
   - 拖动鼠标形成选择框
   - 释放鼠标
   - 框内的所有记忆都会被选中
   - 按住 `Ctrl` 可以追加选择

---

## ?? 过滤记忆

### 按层级过滤
在左侧面板勾选/取消勾选：
- **? ABM (Active)** - 超短期记忆（最近3条）
- **? SCM (Short)** - 短期记忆（最近20条）
- **? ELS (Event)** - 事件日志（最近50条）
- **? CLPA (Archive)** - 长期档案（无限）

每个层级有不同的颜色：
- ?? ABM = 青色
- ?? SCM = 绿色
- ?? ELS = 黄色
- ?? CLPA = 紫色

### 按类型过滤
点击类型按钮：
- **All** - 显示所有类型
- **Conversation** - 只显示对话记忆
- **Action** - 只显示行动记忆

---

## ? 批量操作

选中多个记忆后，可以进行批量操作：

### 总结记忆（SCM → ELS）
1. 选中一个或多个 SCM 记忆
2. 点击 **"Summarize (N)"** 按钮
3. 确认操作
4. 记忆会移动到 ELS 层

### 归档记忆（ELS → CLPA）
1. 选中一个或多个 ELS 记忆
2. 点击 **"Archive (N)"** 按钮
3. 确认操作
4. 记忆会移动到 CLPA 层

### 删除记忆
1. 选中一个或多个记忆
2. 点击 **"Delete (N)"** 按钮（红色）
3. 确认删除
4. 记忆会被永久删除

### 全局操作
不需要选择，直接点击：
- **Summarize All** - 总结所有殖民者的 SCM 记忆
- **Archive All** - 归档所有殖民者的 ELS 记忆

---

## ?? 常识库管理

### 打开常识库
点击右上角的 **"Knowledge"** 按钮

### 界面布局
```
┌─────────────┬──────────────────────┬─────────────────┐
│             │                      │                 │
│  分类导航    │    常识列表          │   详情/编辑      │
│             │                      │                 │
│  - 全部     │  [规则|0.9]          │  标签: 规则      │
│  - 规则     │  回复80字内...       │  重要性: 0.9     │
│  - 世界观   │                      │  内容:           │
│  - 角色状态 │  [世界观|0.8]        │  回复80字内...   │
│  - 历史     │  边缘世界...         │                 │
│  - 其他     │                      │  [编辑] [删除]   │
│             │                      │                 │
│  统计信息   │                      │                 │
│             │                      │                 │
└─────────────┴──────────────────────┴─────────────────┘
```

### 基本操作

#### 新建常识
1. 点击顶部 **"New"** 按钮
2. 填写标签、内容、重要性
3. 选择可见范围（全局/特定角色）
4. 点击 **"Save"**

#### 编辑常识
1. 选中一个常识
2. 右侧面板会显示详情
3. 点击 **"Edit"** 按钮
4. 修改内容
5. 点击 **"Save"**

#### 删除常识
1. 选中一个或多个常识
2. 点击 **"Delete (N)"** 按钮
3. 确认删除

#### 导入常识
1. 点击 **"Import"** 按钮
2. 粘贴常识内容（格式：`[标签|重要性]内容`）
3. 系统会自动解析并导入

#### 导出常识
1. 选中要导出的常识（不选则导出全部）
2. 点击 **"Export (N)"** 或 **"Export All"**
3. 内容会复制到剪贴板

### 多选操作
常识库也支持多选！
- Ctrl + 点击
- Shift + 点击
- 拖拽框选

### 批量操作
选中多个常识后：
- **Enable All** - 批量启用
- **Disable All** - 批量禁用
- **Export Items (N)** - 导出选中项
- **Delete Items (N)** - 批量删除

---

## ?? 注入预览器

### 打开预览器
点击右上角的 **"Preview"** 按钮

### 查看注入效果
预览器会显示：
- 当前会注入的记忆和常识
- 每条记忆/常识的评分详情
- 场景分析（战斗/社交/工作等）
- 提取的关键词列表

这对于调试和优化注入配置非常有用！

---

## ?? UI 特性

### 彩色边框
每个记忆卡片有彩色边框标识层级：
- ?? **青色** = ABM（超短期）
- ?? **绿色** = SCM（短期）
- ?? **黄色** = ELS（事件）
- ?? **紫色** = CLPA（档案）

### 卡片高度
重要的记忆层级使用更大的卡片：
- ABM: 80px（最紧凑）
- SCM: 100px
- ELS: 130px
- CLPA: 160px（最大，显示完整内容）

### 固定标记
固定的记忆会有特殊的金色背景

### 悬停高亮
鼠标悬停在记忆卡片上时会高亮显示

### 选择指示
选中的记忆会有：
- 蓝色高亮背景
- 双重边框
- 左侧蓝色竖条

---

## ?? 使用技巧

### 快速清理旧记忆
1. 取消勾选 ABM、SCM、ELS，只显示 CLPA
2. 拖拽框选要清理的记忆
3. 点击 Delete 批量删除

### 批量整理记忆
1. 使用 Shift+点击 选择一段时间的记忆
2. 使用批量操作快速总结或归档

### 查找特定记忆
1. 使用层级过滤缩小范围
2. 使用类型过滤进一步筛选
3. 滚动查找或使用搜索（常识库）

### 保护重要记忆
1. 点击记忆卡片右上角的 ?? 按钮
2. 固定的记忆不会被自动清理
3. 固定的记忆有金色背景标识

---

## ? 常见问题

### Q: 怎么撤销删除？
A: 删除是永久的，请在确认前仔细检查。建议定期备份存档。

### Q: 为什么有些记忆看不到？
A: 检查左侧的层级过滤器，可能被过滤掉了。

### Q: 拖拽选择不工作？
A: 确保在空白处开始拖拽，不要在卡片上开始。

### Q: 如何取消所有选择？
A: 在空白处点击一下，或使用类型过滤按钮。

### Q: 常识库的分类是自动的吗？
A: 是的，根据标签关键词自动分类：
   - "规则" → Instructions
   - "世界观" → Lore
   - "殖民者状态" → PawnStatus
   - "历史" → History
   - 其他 → Other

---

## ?? 需要帮助？

- ?? 查看完整文档：`README.md`
- ?? 报告问题：GitHub Issues
- ?? 讨论：GitHub Discussions

---

**享受全新的 Mind Stream 体验！** ???
