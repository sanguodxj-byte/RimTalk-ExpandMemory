<?xml version="1.0" encoding="utf-8"?>
<ModMetaData>
	<packageId>cj.rimtalk.expandmemory</packageId>
	<name>RimTalk - Expand Memory</name>
	<author>SANGUO</author>
	<supportedVersions>
		<li>1.5</li>
		<li>1.6</li>
	</supportedVersions>
	<modVersion>3.3.19</modVersion>
	<url>https://github.com/sanguodxj-byte/RimTalk-ExpandMemory</url>
	
	<description>[h1]RimTalk - Expand Memory v3.3.19[/h1]

[b]四层记忆系统 + 智能注入 + 提示词规范化 + AI多平台支持 + 全新UI[/b]

为RimTalk AI对话提供强大的记忆与常识支持，让殖民者拥有真实的记忆和知识！

[hr][/hr]

[h1]核心功能[/h1]

[b]四层记忆架构[/b]
超短期(ABM 6条) 短期(SCM 10-50条) 中期(ELS 20-100条) 长期(CLPA 无限)，模拟真实的记忆衰减

[b]Mind Stream UI (v3.3.19 全新)[/b]
时间线卡片布局：垂直滚动的记忆卡片，彩色边框区分层级
拖拽多选：Ctrl/Shift/框选，支持批量操作
智能过滤：按层级(ABM/SCM/ELS/CLPA)和类型过滤
实时统计：显示各层记忆数量和选中数量
图书馆风格常识库：分类导航、搜索、批量管理

[b]智能动态注入[/b]
时间衰减30% + 重要性30% + 关键词40%
自动选择最相关记忆注入对话
名字识别加成：+0.3分（v3.3.2.38优化）
支持双角色关键词提取（当前角色 + 交互对象）
O(1) LRU缓存优化

[b]自动清理系统 (v3.3.14)[/b]
Activity阈值清理：自动删除activity &lt; 0.01的"死亡"记忆
容量限制强制执行：超过上限时删除最低activity记忆
三重保护：固定记忆、用户编辑记忆、长期记忆永不删除
每小时自动执行，防止记忆无限累积

[b]提示词规范化 (v3.3.2.37)[/b]
用户自定义文本替换规则
支持正则表达式（忽略大小写）
预编译优化 + 20ms超时保护
实时生效，无需重启

[b]通用常识库[/b]
格式：[标签|重要性]内容
支持导入导出、角色专属、可视化UI
标签解析容错：[Noble] 和 [Noble} 都能识别
名字匹配智能识别：直接检测角色名字，+0.3加成

[b]AI 多平台支持[/b]
OpenAI GPT、DeepSeek、Player2、Google Gemini、Custom
Prompt Caching 节省50%费用
独立配置，不依赖RimTalk设置

[hr][/hr]

[h1]使用方法[/h1]

[b]基础配置[/b]
1. 安装 Harmony + RimTalk
2. 启用本Mod
3. 游戏内打开 Memory 标签页
4. 点击右上角"Knowledge"按钮打开常识库

[b]新UI操作指南（v3.3.19）[/b]
记忆时间线：单击选中、Ctrl+单击多选、Shift+单击范围选择、鼠标拖拽框选多个记忆、批量操作：总结、归档、删除选中的记忆

常识库管理：左侧分类（全部/规则/世界观/角色状态/历史/其他）、顶部工具栏（新建、导入、导出、删除）、多选操作（Ctrl/Shift/拖拽选择，批量启用/禁用/导出）、右侧面板（查看详情、编辑内容、设置可见范围）

[b]推荐配置[/b]
动态注入：启用 - 最大记忆：8-10条 - 最大常识：3-5条 - 记忆阈值：0.15 - 常识阈值：0.10

[hr][/hr]

[h1]更新日志[/h1]

[b]v3.3.19 最新[/b]
Mind Stream UI - 全新记忆时间线
卡片式布局：垂直滚动的记忆卡片，每个卡片带彩色边框
拖拽多选：支持Ctrl+点击、Shift+范围选择、鼠标框选
智能过滤：按层级和类型过滤
实时统计：显示各层记忆数量和选中项数量
批量操作：总结、归档、删除选中的记忆
彩色层级：ABM(青)、SCM(绿)、ELS(黄)、CLPA(紫)

图书馆风格常识库UI
三栏布局：分类导航 + 列表 + 详情/编辑
分类过滤：全部/规则/世界观/角色状态/历史/其他
多选操作：批量启用/禁用/导出/删除
搜索功能：按标签或内容快速查找
自动生成：支持Pawn状态和事件记录自动生成
可视化管理：直观的UI替代手动编辑XML

完整翻译支持
新增100+翻译键覆盖所有UI元素
英文/中文双语完整支持
所有按钮、提示、消息都使用翻译系统

[b]v3.3.14[/b]
记忆自动清理系统
Activity阈值清理：自动删除低活跃度记忆
容量限制强制执行：超过上限时删除最低activity记忆
三重保护：固定记忆、用户编辑记忆、长期记忆永不删除
每小时自动执行，防止记忆无限累积导致性能下降

[b]v3.3.13[/b]
常识库评分优化：提升2字关键词评分0.10、3字关键词评分0.16
场景分析显示：预览器显示场景类型（战斗/社交/工作等）
关键词列表显示：预览器显示具体的上下文关键词

[hr][/hr]

[h1]兼容性[/h1]
必需：Harmony
推荐：RimTalk（获得AI对话功能）
加载顺序：Core Harmony RimTalk 本Mod
向后兼容：旧存档自动兼容

[hr][/hr]

[h1]鸣谢[/h1]

Juicy - RimTalk 原作者
RimTalk 是 RimWorld 最优秀的 AI 对话 Mod 之一，为殖民者赋予了真正的灵魂和个性。

GitHub Copilot (Claude Sonnet 4.5)
AI 辅助让开发更高效

GitHub: https://github.com/sanguodxj-byte/RimTalk-ExpandMemory

让你的殖民者拥有真实记忆！
	</description>
	
	<modDependencies>
		<li>
			<packageId>brrainz.harmony</packageId>
			<displayName>Harmony</displayName>
			<steamWorkshopUrl>steam://url/CommunityFilePage/2009463077</steamWorkshopUrl>
		</li>
		<li>
			<packageId>cj.rimtalk</packageId>
			<displayName>RimTalk</displayName>
			<steamWorkshopUrl>https://steamcommunity.com/sharedfiles/filedetails/?id=3381946324</steamWorkshopUrl>
			<downloadUrl>https://github.com/CET-Chengdu/RimTalk</downloadUrl>
		</li>
	</modDependencies>
	
	<loadAfter>
		<li>brrainz.harmony</li>
		<li>cj.rimtalk</li>
	</loadAfter>
	
	<incompatibleWith>
	</incompatibleWith>
</ModMetaData>