# ?? v3.3.19 测试清单

## 测试环境
- [ ] RimWorld 版本：1.5 / 1.6
- [ ] Harmony 已安装
- [ ] RimTalk 已安装
- [ ] RimTalk-ExpandMemory v3.3.19 已启用
- [ ] 游戏语言：中文 / 英文
- [ ] 测试存档：新游戏 / 现有存档

---

## ? 功能测试

### 1. Mind Stream UI - 基础显示
- [ ] 打开 Memory 标签页
- [ ] 顶部显示：殖民者选择器 + "显示所有类人生物"复选框
- [ ] 顶部显示："总计: X 条记忆"
- [ ] 顶部显示："预览"和"常识"按钮
- [ ] 左侧控制面板显示完整
- [ ] 右侧时间线区域显示记忆卡片

### 2. 殖民者选择
- [ ] 点击殖民者选择器，显示下拉菜单
- [ ] 显示所有殖民者名字
- [ ] 选择不同殖民者，记忆列表更新
- [ ] 勾选"显示所有类人生物"，列表包含囚犯/奴隶
- [ ] 取消勾选，列表恢复只显示殖民者

### 3. 记忆卡片显示
- [ ] 卡片显示层级标签（ABM/SCM/ELS/CLPA）
- [ ] 卡片显示类型标签（对话/行动）
- [ ] 卡片显示时间（刚才/不久前/今天等）
- [ ] 卡片显示相关人物（如果有）
- [ ] 卡片显示记忆内容（截断长文本）
- [ ] 卡片显示重要性条（蓝色进度条）
- [ ] 卡片显示活跃度条（蓝色进度条）
- [ ] 卡片有彩色边框：
  - [ ] ABM = 青色
  - [ ] SCM = 绿色
  - [ ] ELS = 黄色
  - [ ] CLPA = 紫色

### 4. 记忆选择功能
- [ ] 单击记忆卡片，卡片被选中（黄色边框）
- [ ] 再次单击，取消选择
- [ ] Ctrl+单击，添加到选择（多选）
- [ ] Ctrl+单击已选中，从选择中移除
- [ ] Shift+单击，范围选择（从上次选择到当前）
- [ ] 鼠标拖拽，框选多个记忆（黄色选择框）
- [ ] 选中后，左侧显示"已选: X"

### 5. 层级过滤
- [ ] 默认所有层级都勾选
- [ ] 取消勾选 ABM，时间线不显示 ABM 记忆
- [ ] 取消勾选 SCM，时间线不显示 SCM 记忆
- [ ] 取消勾选 ELS，时间线不显示 ELS 记忆
- [ ] 取消勾选 CLPA，时间线不显示 CLPA 记忆
- [ ] 重新勾选，记忆重新显示

### 6. 类型过滤
- [ ] 默认选择"全部"
- [ ] 点击"对话"，只显示对话类型记忆
- [ ] 点击"行动"，只显示行动类型记忆
- [ ] 点击"全部"，显示所有类型记忆
- [ ] 切换过滤器，选择被清空

### 7. 统计显示
- [ ] 左侧显示 "ABM: X/3"
- [ ] 左侧显示 "SCM: X/20"
- [ ] 左侧显示 "ELS: X/50"
- [ ] 左侧显示 "CLPA: X"（无上限）
- [ ] 选中记忆后，显示 "已选: X"
- [ ] 数字实时更新

### 8. 批量操作
#### 总结功能
- [ ] 选中 SCM 记忆
- [ ] 点击"总结 (X)"按钮
- [ ] 显示确认对话框："将 X 条SCM记忆总结到ELS？"
- [ ] 点击确认，记忆从 SCM 移动到 ELS
- [ ] 显示成功消息："已总结 X 条记忆"
- [ ] 选中非 SCM 记忆，总结按钮禁用或显示错误

#### 归档功能
- [ ] 选中 ELS 记忆
- [ ] 点击"归档 (X)"按钮
- [ ] 显示确认对话框："将 X 条ELS记忆归档到CLPA？"
- [ ] 点击确认，记忆从 ELS 移动到 CLPA
- [ ] 显示成功消息："已归档 X 条记忆"
- [ ] 选中非 ELS 记忆，归档按钮禁用或显示错误

#### 删除功能
- [ ] 选中任意记忆
- [ ] 点击"删除 (X)"按钮（红色）
- [ ] 显示确认对话框："删除 X 条选中的记忆？"
- [ ] 点击确认，记忆被删除
- [ ] 显示成功消息："已删除 X 条记忆"
- [ ] 固定的记忆不能删除（或显示警告）

### 9. 全局操作
#### 总结全部
- [ ] 点击"总结全部"按钮
- [ ] 系统为所有有 SCM 记忆的殖民者排队总结
- [ ] 显示消息："已为 X 名殖民者排队总结"
- [ ] 如果没有殖民者需要总结，显示："没有殖民者需要总结"

#### 归档全部
- [ ] 点击"归档全部"按钮
- [ ] 系统为所有有 ELS 记忆的殖民者归档
- [ ] 显示消息："已为 X 名殖民者归档记忆"

### 10. 记忆卡片操作
#### 编辑按钮
- [ ] 鼠标悬停在卡片右上角，显示"编辑"按钮
- [ ] 点击编辑按钮，打开编辑对话框
- [ ] 对话框显示记忆内容、标签、备注
- [ ] 修改内容，点击保存
- [ ] 记忆内容更新
- [ ] 点击取消，不保存更改

#### 固定按钮
- [ ] 鼠标悬停在卡片右上角，显示"固定"按钮（向下箭头）
- [ ] 点击固定按钮，记忆被固定
- [ ] 按钮图标变为向上箭头，提示变为"取消固定"
- [ ] 卡片背景变为棕色
- [ ] 再次点击，取消固定
- [ ] 卡片背景恢复正常

### 11. 时间线滚动
- [ ] 垂直滚动条正常工作
- [ ] 滚动流畅，无卡顿
- [ ] 卡片间距合理
- [ ] 不同层级卡片高度不同：
  - [ ] ABM = 80px
  - [ ] SCM = 100px
  - [ ] ELS = 130px
  - [ ] CLPA = 160px

### 12. 预览按钮
- [ ] 点击"预览"按钮
- [ ] 打开调试预览器窗口
- [ ] 显示注入的记忆和常识
- [ ] 显示评分详情
- [ ] 显示关键词提取结果

---

## ? 常识库 UI 测试

### 1. 打开常识库
- [ ] 在 Memory 标签页点击"常识"按钮
- [ ] 常识库窗口打开
- [ ] 显示三栏布局：分类 + 列表 + 详情

### 2. 顶部工具栏
- [ ] 搜索框可以输入文本
- [ ] 展开/收起按钮（?/?）切换右侧面板
- [ ] "新建"按钮可点击
- [ ] "导入"按钮可点击
- [ ] "导出"按钮显示选中数量
- [ ] "删除"按钮显示选中数量
- [ ] "清空全部"按钮可点击

### 3. 左侧分类
- [ ] 显示"分类"标题
- [ ] 显示分类列表：
  - [ ] 全部 (显示总数)
  - [ ] 规则
  - [ ] 世界观
  - [ ] 角色状态
  - [ ] 历史
  - [ ] 其他
- [ ] 点击分类，列表过滤
- [ ] 选中分类高亮显示（蓝色背景）

### 4. 自动生成设置
- [ ] 显示"? 自动生成"可展开按钮
- [ ] 点击展开，显示生成选项
- [ ] 显示"角色状态"复选框
- [ ] 显示"立即生成"按钮
- [ ] 显示"事件记录"复选框
- [ ] 显示"立即生成"按钮
- [ ] 点击生成按钮，显示成功消息

### 5. 统计信息
- [ ] 显示"总数: X"
- [ ] 显示"已启用: X"
- [ ] 显示"已选: X"
- [ ] 数字实时更新

### 6. 中间列表
- [ ] 显示常识条目列表
- [ ] 每行显示：复选框 + [标签] + 重要性 + 内容预览
- [ ] 复选框可以切换启用/禁用
- [ ] 单击条目，右侧显示详情
- [ ] Ctrl+单击，多选
- [ ] Shift+单击，范围选择
- [ ] 鼠标拖拽，框选
- [ ] 选中条目高亮显示
- [ ] 底部显示"显示 X / X"

### 7. 搜索功能
- [ ] 在搜索框输入文本
- [ ] 列表实时过滤
- [ ] 匹配标签的条目显示
- [ ] 匹配内容的条目显示
- [ ] 清空搜索框，显示所有条目

### 8. 右侧详情面板
#### 空状态
- [ ] 未选择时，显示："选择或创建常识条目"

#### 单选详情
- [ ] 选中一个条目，显示详情
- [ ] 显示"详情"标题
- [ ] 显示"编辑"按钮
- [ ] 显示标签
- [ ] 显示重要性
- [ ] 显示状态（已启用/已禁用）
- [ ] 显示可见范围（全局/专属于某角色）
- [ ] 显示完整内容（可滚动）
- [ ] 显示"删除"按钮（红色）

#### 多选统计
- [ ] 选中多个条目，显示多选面板
- [ ] 显示"已选 X 项"
- [ ] 显示"已启用: X"
- [ ] 显示"已禁用: X"
- [ ] 显示"平均重要性: X.XX"
- [ ] 显示"全部启用"按钮
- [ ] 显示"全部禁用"按钮
- [ ] 显示"导出 (X)"按钮
- [ ] 显示"删除 (X)"按钮（红色）

### 9. 编辑面板
#### 新建常识
- [ ] 点击"新建"按钮
- [ ] 右侧显示编辑面板
- [ ] 显示"新建条目"标题
- [ ] 显示标签输入框
- [ ] 显示重要性滑块（0.0-1.0）
- [ ] 显示可见范围下拉菜单
- [ ] 显示内容文本框（多行）
- [ ] 显示"保存"按钮
- [ ] 显示"取消"按钮

#### 编辑现有常识
- [ ] 选中条目，点击"编辑"按钮
- [ ] 显示"编辑条目"标题
- [ ] 输入框填充现有数据
- [ ] 修改内容
- [ ] 点击"保存"，更新条目
- [ ] 显示成功消息："常识条目已保存"
- [ ] 点击"取消"，放弃更改

### 10. 可见范围设置
- [ ] 点击可见范围按钮
- [ ] 显示下拉菜单
- [ ] 显示"全局（所有角色）"选项
- [ ] 显示所有殖民者名字
- [ ] 选择"全局"，常识对所有角色可见
- [ ] 选择特定角色，常识只对该角色可见
- [ ] 保存后，详情面板显示正确的可见范围

### 11. 导入功能
- [ ] 点击"导入"按钮
- [ ] 显示导入对话框
- [ ] 标题："导入常识"
- [ ] 说明："粘贴常识条目，格式：[标签|重要性]内容"
- [ ] 多行文本框
- [ ] 粘贴测试数据：
  ```
  [规则|0.9]回复控制在80字以内
  [世界观|0.8]边缘世界是科技倒退的殖民星球
  [Noble|0.5]Noble是殖民地领袖
  ```
- [ ] 点击"确定"
- [ ] 显示成功消息："已导入 3 个条目"
- [ ] 列表中显示新导入的条目

### 12. 导出功能
#### 导出选中
- [ ] 选中一个或多个条目
- [ ] 点击"导出 (X)"按钮
- [ ] 显示成功消息："已将 X 个条目导出到剪贴板"
- [ ] 粘贴到文本编辑器，验证格式正确

#### 导出全部
- [ ] 不选择任何条目
- [ ] 点击"导出全部"按钮
- [ ] 显示成功消息："已将 X 个条目导出到剪贴板"
- [ ] 粘贴验证

### 13. 删除功能
#### 删除单个
- [ ] 选中一个条目
- [ ] 点击"删除"按钮
- [ ] 显示确认对话框："删除 1 个常识条目？"
- [ ] 点击确认
- [ ] 显示成功消息："已删除 1 个条目"
- [ ] 条目从列表中移除

#### 批量删除
- [ ] 选中多个条目
- [ ] 点击"删除 (X)"按钮
- [ ] 显示确认对话框："删除 X 个常识条目？"
- [ ] 点击确认
- [ ] 显示成功消息："已删除 X 个条目"
- [ ] 所有选中条目被删除

### 14. 清空全部
- [ ] 点击"清空全部"按钮
- [ ] 显示确认对话框："清空所有常识条目？"
- [ ] 点击确认
- [ ] 显示成功消息："已清空所有条目"
- [ ] 所有常识被删除
- [ ] 列表为空

### 15. 批量操作
- [ ] 选中多个条目
- [ ] 点击"全部启用"
- [ ] 所有选中条目的复选框被勾选
- [ ] 点击"全部禁用"
- [ ] 所有选中条目的复选框被取消勾选

---

## ? 翻译测试

### 中文界面
- [ ] 切换游戏语言到中文
- [ ] 重新启动游戏
- [ ] 打开 Memory 标签页
- [ ] 所有按钮显示中文
- [ ] 所有标签显示中文
- [ ] 所有提示显示中文
- [ ] 所有消息显示中文
- [ ] 无翻译键占位符（如 `RimTalk_XXX`）

### 英文界面
- [ ] 切换游戏语言到英文
- [ ] 重新启动游戏
- [ ] 打开 Memory 标签页
- [ ] 所有界面显示英文
- [ ] 文本流畅自然
- [ ] 无中文字符残留

### 关键翻译检查
#### Mind Stream UI
- [ ] "选择殖民者" / "Select Colonist"
- [ ] "显示所有类人生物" / "Show All Humanlikes"
- [ ] "预览" / "Preview"
- [ ] "常识" / "Knowledge"
- [ ] "记忆过滤器" / "Memory Filters"
- [ ] "层级" / "Layers"
- [ ] "类型" / "Type"
- [ ] "统计" / "Statistics"
- [ ] "批量操作" / "Batch Actions"
- [ ] "总结" / "Summarize"
- [ ] "归档" / "Archive"
- [ ] "删除" / "Delete"

#### 常识库 UI
- [ ] "分类" / "Categories"
- [ ] "新建" / "New"
- [ ] "导入" / "Import"
- [ ] "导出" / "Export"
- [ ] "清空全部" / "Clear All"
- [ ] "详情" / "Details"
- [ ] "编辑" / "Edit"
- [ ] "标签" / "Tag"
- [ ] "重要性" / "Importance"
- [ ] "状态" / "Status"
- [ ] "可见范围" / "Visibility"
- [ ] "内容" / "Content"

---

## ? 性能测试

### 滚动性能
- [ ] 创建100+条记忆
- [ ] 时间线滚动流畅
- [ ] 无明显卡顿
- [ ] CPU使用率正常

### 拖拽选择性能
- [ ] 拖拽选择大量记忆（50+）
- [ ] 选择响应迅速
- [ ] 无延迟或卡顿
- [ ] 选择框绘制正常

### 过滤性能
- [ ] 在大量记忆中切换过滤器
- [ ] 过滤响应即时
- [ ] UI更新流畅

### 常识库性能
- [ ] 导入100+条常识
- [ ] 列表滚动流畅
- [ ] 搜索响应快速
- [ ] 多选操作流畅

---

## ? 兼容性测试

### 其他Mod兼容
- [ ] 与 RimTalk 正常协作
- [ ] 与 Harmony 无冲突
- [ ] 与其他UI Mod 无冲突

### 存档兼容
- [ ] 加载旧存档（v3.3.18及之前）
- [ ] 记忆数据正常读取
- [ ] 常识数据正常读取
- [ ] 无错误日志
- [ ] 保存新存档
- [ ] 重新加载新存档

---

## ? 错误处理测试

### 异常输入
- [ ] 导入空白常识
- [ ] 导入格式错误的常识
- [ ] 删除不存在的记忆
- [ ] 选择无效的殖民者

### 边界条件
- [ ] 记忆数量为0
- [ ] 常识数量为0
- [ ] 选择0个条目进行操作
- [ ] 重要性设为0.0和1.0

### 错误消息
- [ ] 所有错误显示友好消息
- [ ] 无程序崩溃
- [ ] 错误日志记录完整

---

## ?? 测试结果

### 通过项统计
- Mind Stream UI: __ / __
- 常识库 UI: __ / __
- 翻译: __ / __
- 性能: __ / __
- 兼容性: __ / __
- 错误处理: __ / __

### 总体通过率
**__ / __ (__ %)**

### 发现的问题
1. [问题描述]
2. [问题描述]
3. ...

### 测试人员签名
- 测试人员：__________
- 测试日期：__________
- RimWorld版本：__________
- Mod版本：v3.3.19

---

## ?? 测试结论

- [ ] ? **通过** - 可以正式发布
- [ ] ?? **有警告** - 有小问题但不影响使用
- [ ] ? **未通过** - 需要修复后重新测试

### 备注
[在此添加任何额外的测试备注或观察]
