# RimTalk 记忆扩展系统

一个为RimWorld设计的智能记忆管理和AI对话增强Mod

**版本：** v2.4.3  
**构建状态：** ✅ 成功  
**RimWorld版本：** 1.4+  
**.NET Framework：** 4.7.2

---

## 🎉 v2.4.3 更新亮点 (最新)

### 🐛 重要BUG修复
- ✅ **修复入殖时间显示错误** - 老成员不再显示"刚加入"
- ✅ **修复俄语翻译乱码** - 所有界面文字正确显示
- ✅ **修复韩语翻译乱码** - 添加机器翻译支持

### 🌍 多语言改进
- ✅ 俄语设置界面完整翻译
- ✅ 韩语设置界面完整翻译
- ✅ 所有翻译文件UTF-8编码正确

---

## 🌍 翻译状态与社区贡献

### 当前翻译完成度

| 语言 | 核心功能 | 记忆系统 | 设置界面 | 状态 | 贡献者 |
|------|---------|---------|---------|------|--------|
| English | ✅ 100% | ✅ 100% | ✅ 100% | 官方 | SANGUO |
| 简体中文 | ✅ 100% | ✅ 100% | ✅ 100% | 官方 | SANGUO |
| Русский (俄语) | ✅ 95% | ⚠️ 80% | ⚠️ 75% | **需要审核** | 社区 + AI |
| 한국어 (韩语) | ✅ 95% | ⚠️ 80% | ⚠️ 75% | **需要审核** | 社区 + AI |

### 📢 寻求社区帮助！

**我们需要母语者帮助改进翻译质量！**

#### 🇷🇺 俄语审核需求
核心RimTalk翻译质量很高（感谢原贡献者！），但新增的记忆系统和设置界面使用了机器翻译，需要母语者润色。

**需要改进的文件：**
- `Languages/Russian/Keyed/RimTalk.xml` (第167-226行，`RimTalk_Settings_*`部分)
- `Languages/Russian/Keyed/MemoryPatch.xml` (第102-125行，UI按钮)

**主要问题：**
- 机器翻译可能不够自然
- 技术术语需要统一
- UI按钮文字可能过长

#### 🇰🇷 韩语审核需求
核心翻译非常优秀，新增部分同样需要母语者审核。

**需要改进的文件：**
- `Languages/Korean/Keyed/RimTalk.xml` (第167-226行)
- `Languages/Korean/Keyed/MemoryPatch.xml` (第102-125行)

### 如何贡献翻译

1. **Fork** 本仓库
2. **编辑** 翻译文件（保持UTF-8 BOM编码）
3. **测试** 在游戏中验证（可选但推荐）
4. **提交** Pull Request
5. **标注** 在修改处添加注释：`<!-- Reviewed by: [Your Name] -->`

### 翻译指南

✅ **保持一致性**：
- 技术术语统一（ABM, SCM, ELS, CLPA）
- 与现有翻译风格匹配

✅ **适配UI**：
- 按钮文字简短（避免超出按钮宽度）
- 菜单项清晰易懂

✅ **添加注释**：
- 如果改动了机器翻译，说明原因
- 标注审核者信息

### 贡献者名单

感谢以下贡献者：
- **俄语社区** - 核心RimTalk翻译
- **韩语社区** - 核心RimTalk翻译
- **GitHub Copilot** - 新功能机器翻译（待审核）

---

## 🌟 核心功能

### 1️⃣ 动态记忆注入系统
智能选择最相关的记忆注入到AI对话中，类似CharacterAI的工作方式。

- ✅ **多维度评分**：时间衰减 + 重要性 + 关键词匹配
- ✅ **智能选择**：自动选择最相关的1-20条记忆
- ✅ **灵活配置**：权重可调，支持静态/动态切换
- ✅ **高性能**：Jaccard相似度算法，<2ms延迟

### 2️⃣ 通用常识库系统
管理和注入世界观、背景知识等通用信息。

- ✅ **动态注入**：基于关键词相关性智能选择
- ✅ **纯文本格式**：`[标签]内容`，简单易用
- ✅ **可视化管理**：完整的UI界面
- ✅ **导入/导出**：批量管理，支持备份
- ✅ **关键词编辑**：手动指定或自动提取

### 3️⃣ 注入内容预览器
实时查看将要注入给AI的记忆和常识内容。

- ✅ **实时预览**：查看确切的注入内容
- ✅ **详细评分**：显示每条记忆/常识的评分明细
- ✅ **简单可靠**：无需复杂拦截，100%可用

### 4️⃣ AI提供商支持
支持多个主流AI服务。

- ✅ **OpenAI**：GPT-3.5/GPT-4系列
- ✅ **DeepSeek**：国产，低成本，中文优化
- ✅ **Google Gemini**：免费额度大

### 5️⃣ 自动生成Pawn状态常识

- ✅ 自动检测殖民者加入时间
- ✅ 自动包含种族信息
- ✅ 7个时间段分级
- ✅ 防止新人错误谈论历史事件
- ✅ 重要性自动递减

---

## 📦 快速开始

### 安装

1. 订阅Steam创意工坊（推荐）
2. 或下载Release文件，解压到`Mods`文件夹

### 基础配置

1. **启动游戏**，加载存档
2. **打开Mod设置** → RimTalk-ExpandMemory
3. **确认动态注入已启用**（默认开启）
4. **打开常识库管理**
5. **导入示例常识**（可选）

### 推荐配置

```
最大注入记忆数：8-10
最大注入常识数：3-5
时间衰减：30%
重要性：30%
关键词匹配：40%
```

---

## 📚 文档

### 快速入门
- **[UPDATE_NOTES.md](UPDATE_NOTES.md)** - 更新说明（新手必读）
- **[KNOWLEDGE_EXAMPLES.md](KNOWLEDGE_EXAMPLES.md)** - 常识库示例
- **[INJECTION_PREVIEW_GUIDE.md](INJECTION_PREVIEW_GUIDE.md)** - 预览器使用指南

### 功能指南
- **[DYNAMIC_INJECTION_GUIDE.md](DYNAMIC_INJECTION_GUIDE.md)** - 动态注入技术文档
- **[UI_IMPROVEMENTS.md](UI_IMPROVEMENTS.md)** - 界面功能说明

### 技术文档
- **[BUGFIX_DIALOGUE_DUPLICATION.md](BUGFIX_DIALOGUE_DUPLICATION.md)** - 对话重复修复
- **[FINAL_SUMMARY.md](FINAL_SUMMARY.md)** - 完整功能总结

---

## 🤝 兼容性

### 必需
- ✅ RimWorld 1.4+
- ✅ Harmony

### 可选
- ✅ RimTalk（强烈推荐）
- ⚠️ 其他AI Mod（未测试）

---

## 🙏 致谢

### 灵感来源
- **CharacterAI** - 动态记忆注入
- **SillyTavern** - 常识库系统
- **RimWorld社区** - 反馈与建议

### 技术支持
- **Harmony** - Mod框架
- **RimTalk** - AI对话集成

### 翻译贡献
- **俄语社区** - 核心界面翻译
- **韩语社区** - 核心界面翻译

---

## 📄 许可

MIT License

---

## 📞 联系与支持

### 反馈
- Steam创意工坊评论
- GitHub Issues (推荐用于BUG报告和翻译贡献)
- RimWorld Modding Discord

### 翻译贡献
请通过GitHub Issues或Pull Request提交：
- 🇷🇺 [Russian Translation Review Needed](../../issues)
- 🇰🇷 [Korean Translation Review Needed](../../issues)

---

**享受游戏！** 🎮✨

如有问题，请查看文档或联系支持。
